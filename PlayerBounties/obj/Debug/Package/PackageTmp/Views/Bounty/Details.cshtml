@model PlayerBounties.Models.Bounty

@{
    ViewBag.Title = "Bounty Details - " + Model.CharacterName(Model.PlacedOnId);
}

<div>
	<table id="bountyDetailsTable" cellspacing="0" cellpadding="5" border="0">
		<tr style="height: 20px;"></tr>
		<tr>
			<td class="inputLabelCell">
				Name:
			</td>
			<td align="left">
				<span>@Model.CharacterName(Model.PlacedOnId)</span>
			</td>
		</tr>
		<tr>
			<td class="inputLabelCell">
				@Html.LabelFor(model => model.Amount):
			</td>
			<td align="left">
				<span>@Html.DisplayFor(model => model.Amount) credits</span>
			</td>
		</tr>
		<tr>
			<td class="inputLabelCell">
				@Html.LabelFor(model => model.Reason):
			</td>
			<td align="left">
				<span>@Html.DisplayFor(model => model.Reason)</span>
			</td>
		</tr>
		<tr>
			<td class="inputLabelCell">
				@Html.LabelFor(model => model.Message):
			</td>
			<td align="left">
				<span>@Html.DisplayFor(model => model.Message)</span>
			</td>
		</tr>
		<tr>
			<td class="inputLabelCell">
				@Html.LabelFor(model => model.PlacedById):
			</td>
			<td align="left">
				<span>@Model.CharacterName(Model.PlacedById)</span>
			</td>
		</tr>
			
		<tr>
			<td class="inputLabelCell">
				@Html.LabelFor(model => model.DatePlaced):
			</td>
			<td align="left">
				<span>@Html.DisplayFor(model => model.DatePlaced)</span>
			</td>
		</tr>
	
		@if(Model.DateCompleted != null)
		{
			<tr>
				<td class="inputLabelCell">
					@Html.LabelFor(model => model.DateCompleted):
				</td>
				<td align="left">
					<span>@Html.DisplayFor(model => model.DateCompleted)</span>
				</td>
			</tr>
		}	

		<tr>
			<td class="inputLabelCell">
				Status:
			</td>
			<td align="left">
				<span>@Model.GetStatus(Model.Id)</span>
			</td>
		</tr>
	</table>
</div>

@using(Html.BeginForm(FormMethod.Post))
{
	<!-- If user is logged in, show div  -->
	if(Request.IsAuthenticated)
	{
		if(Model.GetStatus(Model.Id) == "Active")
		{
			<p>Upload picture to complete bounty</p>
	
			@Html.DropDownList("CharacterList", String.Empty)
		}

		if(Model.IsBountyOwner(Model.GetLoggedInUserId(), Model.Id))
		{
			if(Model.GetStatus(Model.Id) == "Placement Pending")
			{
				@Html.ActionLink("Edit", "Edit", new { id = Model.Id })
			}
		}
	}
	
	<div class="rowBlank">
		@if(Request.IsAuthenticated)
		{
			<input type="submit" value="Complete Bounty" />
			<input type="button" value="Back" onclick="window.location='../../Home/Dashboard'" />
		}
		else
		{
			<input type="button" value="Back" onclick="window.location='../../Home/Index'" />
		}
		
	</div>
}